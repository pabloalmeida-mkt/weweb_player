<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>CSPlayer Mobile com PlayerJS</title>
<script src="playerjs.js"></script>
<style>
html, body {
    margin:0; padding:0; width:100%; height:100%; background:#000;
}
#player-container {
    position: relative;
    width: 100%;
    height: 100%;
    background:#000;
}
#player-overlay {
    position: absolute;
    top:0; left:0;
    width:100%; height:100%;
    pointer-events:none; /* inicialmente não bloqueia clicks */
}
.controls {
    position: absolute;
    bottom: 10px;
    left: 50%;
    transform: translateX(-50%);
    display:flex;
    gap:10px;
    background: rgba(0,0,0,0.5);
    padding:5px 10px;
    border-radius:5px;
}
button {
    background:none;
    border:none;
    color:white;
    font-size:16px;
    cursor:pointer;
}
input[type=range] {
    width:150px;
}
</style>
</head>
<body>

<div id="player-container">
    <div id="playerjs"></div>
    <div id="player-overlay">
        <div class="controls">
            <button id="backward">⏪ 10s</button>
            <button id="playpause">▶️</button>
            <button id="forward">10s ⏩</button>
            <input type="range" id="timeline" min="0" max="100" value="0">
            <button id="fullscreen">⛶</button>
        </div>
    </div>
</div>

<script>
    // ===== CONFIGURAÇÃO PLAYERJS =====
    var playerConfig = {
        id: "playerjs",
        file: "https://www.youtube.com/watch?v=VIDEO_ID",
        params: {
            modestbranding:1,
            rel:0,
            iv_load_policy:3,
            playsinline:1,
            autoplay:1,
            mute:1,
            controls:0
        }
    };
    var player = new Playerjs(playerConfig);

    // ===== CONTROLES CUSTOM =====
    const btnPlay = document.getElementById("playpause");
    const btnForward = document.getElementById("forward");
    const btnBackward = document.getElementById("backward");
    const timeline = document.getElementById("timeline");
    const fullscreenBtn = document.getElementById("fullscreen");
    const container = document.getElementById("player-container");

    let isPlaying = false;
    let duration = 0;

    // PLAY / PAUSE
    btnPlay.addEventListener("click", ()=>{
        if(isPlaying){
            player.api("pause");
        } else {
            player.api("play");
        }
    });

    // FORWARD / BACKWARD
    btnForward.addEventListener("click", async ()=>{
        const current = await player.api("time");
        player.api("seek", current + 10);
    });
    btnBackward.addEventListener("click", async ()=>{
        const current = await player.api("time");
        player.api("seek", Math.max(0, current - 10));
    });

    // TIMELINE
    setInterval(async ()=>{
        if(player){
            const current = await player.api("time");
            duration = await player.api("duration");
            if(duration > 0){
                timeline.value = (current/duration)*100;
            }
        }
    }, 500);

    timeline.addEventListener("input", async ()=>{
        if(duration>0){
            const seekTime = (timeline.value/100)*duration;
            player.api("seek", seekTime);
        }
    });

    // FULLSCREEN
    fullscreenBtn.addEventListener("click", ()=>{
        if(!document.fullscreenElement){
            container.requestFullscreen();
        } else {
            document.exitFullscreen();
        }
    });

    // DETECTA PLAY / PAUSE DO PLAYER
    setInterval(async ()=>{
        const state = await player.api("state"); // 1=playing,2=paused
        isPlaying = state==1;
        btnPlay.textContent = isPlaying ? "⏸️" : "▶️";
    }, 300);

</script>
</body>
</html>
